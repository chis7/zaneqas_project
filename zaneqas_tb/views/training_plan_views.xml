<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="training_plan_tree" model="ir.ui.view">
        <field name="name">training.plan.tree</field>
        <field name="model">training.plan</field>
        <field name="arch" type="xml">
            <tree>
                <field name="reference"/>
                <field name="name"/>
                <field name="province"/>
                <field name="institution"/>
                <field name="yearOfPlan"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="training_plan_form" model="ir.ui.view">
        <field name="name">training.plan.form</field>
        <field name="model">training.plan</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_save_training_plan_as_draft" data-hotkey="v"
                            confirm="Are you sure you want to save as draft?"
                            string="Save as Draft" class="btn-primary" type="object"
                            context="{'validate_analytic': True}"
                            invisible="state != 'draft' "/>
                    <button name="action_submit_training_plan_to_hrdc" data-hotkey="v"
                            confirm="Are you sure you want to make this submission?"
                            string="Save and Submit" class="btn-primary" type="object"
                            context="{'validate_analytic': True}"
                            invisible="state != 'draft' "/>
                    <button name="action_hrdc_approve_training_plan" data-hotkey="v"
                            groups="hrms_training.group_HDRC_approve_training_plan"
                            confirm="Are you sure you want to make this approval?"
                            string="Approve" class="btn-primary" type="object" context="{'validate_analytic': True}"
                            invisible="state != 'hrdc' "/>
                    <button name="action_hrdc_send_back_training_plan" data-hotkey="v"
                            groups="hrms_training.group_HDRC_approve_training_plan"
                            confirm="Are you sure you want to send back?"
                            string="Send Back" class="btn-primary" type="object" context="{'validate_analytic': True}"
                            invisible="state != 'hrdc' "/>
                    <button name="action_ps_approve_training_plan" data-hotkey="v"
                            groups="hrms_training.group_PS_approve_training_plan"
                            confirm="Are you sure you want to make this approval?"
                            string="Approve" class="btn-primary" type="object" context="{'validate_analytic': True}"
                            invisible="state != 'ps' "/>
                    <button name="action_ps_send_back_training_plan" data-hotkey="v"
                            groups="hrms_training.group_PS_approve_training_plan"
                            confirm="Are you sure you want to send back?"
                            string="Send Back" class="btn-primary" type="object" context="{'validate_analytic': True}"
                            invisible="state != 'ps' "/>
                    <button name="action_psmd_approve_training_plan" data-hotkey="v"
                            groups="hrms_training.group_PSMD_approve_training_plan"
                            confirm="Are you sure you want to make this approval?"
                            string="Approve" class="btn-primary" type="object" context="{'validate_analytic': True}"
                            invisible="state != 'psmd' "/>
                    <button name="action_psmd_send_back_training_plan" data-hotkey="v"
                            groups="hrms_training.group_PSMD_approve_training_plan"
                            confirm="Are you sure you want to send back?"
                            string="Send Back" class="btn-primary" type="object" context="{'validate_analytic': True}"
                            invisible="state != 'psmd' "/>
                    <field name="state" context="{'validate_analytic': True}" widget="statusbar"
                           statusbar_visible="draft,hrdc,ps,psmd,approved"/>

                </header>

                <sheet>
                    <div class="oe_title">
                        <h3>
                            <field name="reference"/>
                        </h3>
                    </div>
                    <group context="{'validate_analytic': True}"
                           invisible="state != 'draft'">
                        <widget name="web_ribbon" title="Draft" bg_color="bg-danger"
                                invisible="state != 'draft'"/>
                        <group>
                            <field name="name" readonly="state != 'draft'"/>
                            <field name="province" readonly="state != 'draft'"/>
                            <field name="institution" readonly="state != 'draft'"/>
                            <field name="yearOfPlan" readonly="state != 'draft'"/>
                        </group>
                        <group>
                            <group>
                                <field name="hrdcComment" readonly="state != 'hrdc'"/>
                                <field name="psComment" readonly="state != 'ps'"/>
                                <field name="psmdComment" readonly="state != 'psmd'"/>
                            </group>
                        </group>
                    </group>
                    <group context="{'validate_analytic': True}"
                           invisible="state != 'hrdc'">
                        <widget name="web_ribbon" title="Pending HRDC Approval" bg_color="bg-danger"
                                invisible="state != 'hrdc'"/>
                        <group>
                            <field name="name" readonly="state != 'draft'"/>
                            <field name="province" readonly="state != 'draft'"/>
                            <field name="institution" readonly="state != 'draft'"/>
                            <field name="yearOfPlan" readonly="state != 'draft'"/>
                        </group>
                        <group>
                            <field name="hrdcComment" readonly="state != 'hrdc'"/>
                            <field name="psComment" readonly="state != 'ps'"/>
                            <field name="psmdComment" readonly="state != 'psmd'"/>
                        </group>
                    </group>
                    <group context="{'validate_analytic': True}"
                           invisible="state != 'ps'">
                        <widget name="web_ribbon" title="Pending PS Approval" bg_color="bg-danger"
                                invisible="state != 'ps'"/>
                        <group>
                            <field name="name" readonly="state != 'draft'"/>
                            <field name="province" readonly="state != 'draft'"/>
                            <field name="institution" readonly="state != 'draft'"/>
                            <field name="yearOfPlan" readonly="state != 'draft'"/>
                        </group>
                        <group>
                            <field name="hrdcComment" readonly="state != 'hrdc'"/>
                            <field name="psComment" readonly="state != 'ps'"/>
                            <field name="psmdComment" readonly="state != 'psmd'"/>
                        </group>
                    </group>
                    <group context="{'validate_analytic': True}"
                           invisible="state != 'psmd'">
                        <widget name="web_ribbon" title="Pending PSMD Approval" bg_color="bg-danger"
                                invisible="state != 'psmd'"/>
                        <group>
                            <field name="name" readonly="state != 'draft'"/>
                            <field name="province" readonly="state != 'draft'"/>
                            <field name="institution" readonly="state != 'draft'"/>
                            <field name="yearOfPlan" readonly="state != 'draft'"/>
                        </group>
                        <group>
                            <field name="hrdcComment" readonly="state != 'hrdc'"/>
                            <field name="psComment" readonly="state != 'ps'"/>
                            <field name="psmdComment" readonly="state != 'psmd'"/>
                        </group>
                    </group>
                    <group context="{'validate_analytic': True}"
                           invisible="state != 'approved' ">
                        <widget name="web_ribbon" title="Approved" bg_color="bg-success"
                                invisible="state != 'approved'" readonly="state != 'draft'"/>
                        <group>
                            <field name="name" readonly="state != 'draft'"/>
                            <field name="province" readonly="state != 'draft'"/>
                            <field name="institution" readonly="state != 'draft'"/>
                            <field name="yearOfPlan" readonly="state != 'draft'"/>
                        </group>
                        <group>
                            <field name="hrdcComment" readonly="state != 'hrdc'"/>
                            <field name="psComment" readonly="state != 'ps'"/>
                            <field name="psmdComment" readonly="state != 'psmd'"/>
                        </group>
                    </group>
                    <notebook context="{'validate_analytic': True}" invisible="state != 'draft'">
                        <page string="Training Plan Entries" id="trainingPlanLinesDRAFT">
                            <field name="training_plan_line_ids">
                                <tree>
                                    <field name="training_plan_state" column_invisible="True"/>
                                    <field name="name"/>
                                    <field name="employee_id"/>
                                    <field name="priorityArea"/>
                                    <field name="priorityRanking"/>
                                    <field name="level_of_training_proposed"/>
                                    <field name="location_of_programme_proposed"/>
                                    <field name="proposed_date_of_programme"/>
                                    <field name="sponsor_id"/>
                                    <field name="justification_of_training"/>
                                    <field name="estimated_cost_per_year"/>
                                </tree>

                                <form>
                                    <sheet>
                                        <group>
                                            <group>
                                                <field name="name"/>
                                                <field name="employee_id"/>
                                                <field name="priorityArea"/>
                                                <field name="priorityRanking"/>
                                                <field name="level_of_training_proposed"/>
                                            </group>
                                            <group>
                                                <field name="location_of_programme_proposed"/>
                                                <field name="proposed_date_of_programme"/>
                                                <field name="sponsor_id"/>
                                                <field name="justification_of_training"/>
                                                <field name="estimated_cost_per_year"/>
                                            </group>
                                        </group>
                                    </sheet>
                                </form>
                            </field>

                        </page>
                    </notebook>
                    <notebook context="{'validate_analytic': True}" invisible="state != 'hrdc'">
                        <page string="Training Plan Entries" id="trainingPlanLinesHRDC">
                            <field name="training_plan_line_ids">
                                <tree create="0" editable="top" delete="0">
                                    <field name="training_plan_state" column_invisible="True"/>
                                    <field name="name" readonly="1"/>
                                    <field name="employee_id" readonly="1"/>
                                    <field name="priorityArea" readonly="1"/>
                                    <field name="priorityRanking" readonly="1"/>
                                    <field name="level_of_training_proposed" readonly="1"/>
                                    <field name="location_of_programme_proposed"
                                           readonly="1"/>
                                    <field name="proposed_date_of_programme" readonly="1"/>
                                    <field name="sponsor_id" readonly="1"/>
                                    <field name="justification_of_training" readonly="1"/>
                                    <field name="estimated_cost_per_year" readonly="1"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                    <notebook context="{'validate_analytic': True}" invisible="state != 'ps'">
                        <page string="Training Plan Entries" id="trainingPlanLinesPS">
                            <field name="training_plan_line_ids">
                                <tree create="0" editable="top" delete="0">
                                    <field name="training_plan_state" column_invisible="True"/>
                                    <field name="name" readonly="1"/>
                                    <field name="employee_id" readonly="1"/>
                                    <field name="priorityArea" readonly="1"/>
                                    <field name="priorityRanking" readonly="1"/>
                                    <field name="level_of_training_proposed" readonly="1"/>
                                    <field name="location_of_programme_proposed"
                                           readonly="1"/>
                                    <field name="proposed_date_of_programme" readonly="1"/>
                                    <field name="sponsor_id" readonly="1"/>
                                    <field name="justification_of_training" readonly="1"/>
                                    <field name="estimated_cost_per_year" readonly="1"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                    <notebook context="{'validate_analytic': True}" invisible="state != 'psmd'">
                        <page string="Training Plan Entries" id="trainingPlanLinesPSMD">
                            <field name="training_plan_line_ids">
                                <tree create="0" editable="top" delete="0">
                                    <field name="training_plan_state" column_invisible="True"/>
                                    <field name="name" readonly="1"/>
                                    <field name="employee_id" readonly="1"/>
                                    <field name="priorityArea" readonly="1"/>
                                    <field name="priorityRanking" readonly="1"/>
                                    <field name="level_of_training_proposed" readonly="1"/>
                                    <field name="location_of_programme_proposed"
                                           readonly="1"/>
                                    <field name="proposed_date_of_programme" readonly="1"/>
                                    <field name="sponsor_id" readonly="1"/>
                                    <field name="justification_of_training" readonly="1"/>
                                    <field name="estimated_cost_per_year" readonly="1"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                    <notebook context="{'validate_analytic': True}"
                              invisible="state != 'approved'">
                        <page string="Training Plan Entries" id="trainingPlanLinesApproved">
                            <field name="training_plan_line_ids">
                                <tree create="0" editable="top" delete="0">
                                    <field name="training_plan_state" column_invisible="True"/>
                                    <field name="state" column_invisible="True"/>
                                    <field name="is_current_user_employee" column_invisible="True"/>
                                    <field name="is_current_user_already_applicant" column_invisible="True"/>
                                    <field name="is_current_user_applicant" column_invisible="True"/>
                                    <field name="name" readonly="1"/>
                                    <field name="employee_id" readonly="1"/>
                                    <field name="priorityArea" readonly="1" optional="hide"/>
                                    <field name="priorityRanking" readonly="1" optional="hide"/>
                                    <field name="level_of_training_proposed" readonly="1"/>
                                    <field name="location_of_programme_proposed"
                                           readonly="1"/>
                                    <field name="proposed_date_of_programme" readonly="1" optional="hide"/>
                                    <field name="sponsor_id" readonly="1"/>
                                    <field name="justification_of_training" readonly="1" optional="hide"/>
                                    <field name="estimated_cost_per_year" readonly="1" optional="hide"/>
                                    <button name="action_apply_for_authority_to_study"
                                            confirm="Are you sure you want to apply?"
                                            string="Apply Here" class="btn-primary"
                                            type="object"
                                            context="{'validate_analytic': True}"
                                            invisible="is_current_user_applicant == False"/>

                                    <button name="action_apply_for_authority_to_study"
                                            string="Already Applied For" class="btn-warning"
                                            type="object"
                                            context="{'validate_analytic': True}"
                                            invisible="is_current_user_already_applicant == False"
                                            disabled="1"/>

                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter" context="{'validate_analytic': True}">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="training_plan_search" model="ir.ui.view">
        <field name="name">training.plan.search</field>
        <field name="model">training.plan</field>
        <field name="arch" type="xml">
            <search string="Training Plans">
                <field name="name"/>
                <field name="province"/>
                <field name="institution"/>
                <field name="yearOfPlan"/>
                <separator/>
            </search>
        </field>
    </record>

    <!-- training plan action-->
    <record id="training_plan_action" model="ir.actions.act_window">
        <field name="name">Training Plan</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">training.plan</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                create a training plan
            </p>
        </field>
    </record>

</odoo>
